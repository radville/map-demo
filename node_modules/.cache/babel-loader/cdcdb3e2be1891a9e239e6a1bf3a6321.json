{"ast":null,"code":"var _jsxFileName = \"/Users/Laura/Development/solar-calculator/src/components/WebMapView.js\";\n// Adapted from \"Using the ArcGIS API for JavaScript with React\"\n// found here: https://developers.arcgis.com/javascript/latest/guide/react/\nimport React from 'react';\nimport { loadModules } from 'esri-loader'; // import geometryService from '../scripts/geometryService'\n\nexport class WebMapView extends React.Component {\n  constructor(props) {\n    super(props);\n    this.mapRef = React.createRef();\n    this.state = {\n      stylePath: 'https://js.arcgis.com/3.31/esri/css/esri.css'\n    };\n  }\n\n  componentDidMount() {\n    // lazy load the required ArcGIS API for JavaScript modules and CSS\n    loadModules(['esri/Map', 'esri/views/MapView', 'esri/widgets/Search', 'dojo/_base/lang', 'esri/toolbars/draw', \"esri/graphic\", \"esri/tasks/GeometryService\", \"esri/tasks/AreasAndLengthsParameters\", \"esri/symbols/SimpleFillSymbol\"], {\n      css: true\n    }).then(([ArcGISMap, MapView, Search, lang, Draw, Graphic, GeometryService, AreasAndLengthsParameters, SimpleFillSymbol]) => {\n      const map = new ArcGISMap({\n        basemap: 'topo-vector'\n      });\n      let view = new MapView({\n        container: this.mapRef.current,\n        map: map,\n        center: [-118, 34],\n        zoom: 8\n      }); // add searchbar \n\n      let search = new Search({\n        view: view\n      });\n      view.ui.add(search, \"top-right\");\n      let draw = new Draw(map);\n      draw.on(\"draw-end\", lang.hitch(map, getAreaAndLength));\n      draw.activate(Draw.FREEHAND_POLYGON);\n\n      function outputAreaAndLength(evtObj) {\n        let result = evtObj.result;\n        console.log(json.stringify(result));\n        dom.byId(\"area\").innerHTML = result.areas[0].toFixed(3) + \" acres\";\n        dom.byId(\"length\").innerHTML = result.lengths[0].toFixed(3) + \" feet\";\n      }\n\n      function getAreaAndLength(evtObj) {\n        let geometry = evtObj.geometry;\n        map.graphics.clear();\n        let graphic = map.graphics.add(new Graphic(geometry, new SimpleFillSymbol())); //setup the parameters for the areas and lengths operation\n\n        let geometryService = new GeometryService(\"https://sampleserver6.arcgisonline.com/arcgis/rest/services/Utilities/Geometry/GeometryServer\");\n        geometryService.on(\"areas-and-lengths-complete\", outputAreaAndLength);\n        const areasAndLengthParams = new AreasAndLengthsParameters();\n        areasAndLengthParams.lengthUnit = GeometryService.UNIT_FOOT;\n        areasAndLengthParams.areaUnit = GeometryService.UNIT_ACRES;\n        areasAndLengthParams.calculationType = \"geodesic\";\n        geometryService.simplify([geometry], function (simplifiedGeometries) {\n          areasAndLengthParams.polygons = simplifiedGeometries;\n          geometryService.areasAndLengths(areasAndLengthParams);\n        });\n      }\n    });\n  }\n\n  componentWillUnmount() {\n    if (this.view) {\n      // destroy the map view\n      this.view.container = null;\n    }\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"webmap\",\n      ref: this.mapRef,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    });\n  }\n\n}","map":{"version":3,"sources":["/Users/Laura/Development/solar-calculator/src/components/WebMapView.js"],"names":["React","loadModules","WebMapView","Component","constructor","props","mapRef","createRef","state","stylePath","componentDidMount","css","then","ArcGISMap","MapView","Search","lang","Draw","Graphic","GeometryService","AreasAndLengthsParameters","SimpleFillSymbol","map","basemap","view","container","current","center","zoom","search","ui","add","draw","on","hitch","getAreaAndLength","activate","FREEHAND_POLYGON","outputAreaAndLength","evtObj","result","console","log","json","stringify","dom","byId","innerHTML","areas","toFixed","lengths","geometry","graphics","clear","graphic","geometryService","areasAndLengthParams","lengthUnit","UNIT_FOOT","areaUnit","UNIT_ACRES","calculationType","simplify","simplifiedGeometries","polygons","areasAndLengths","componentWillUnmount","render"],"mappings":";AAAA;AACA;AAEA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,WAAT,QAA4B,aAA5B,C,CACA;;AAEA,OAAO,MAAMC,UAAN,SAAyBF,KAAK,CAACG,SAA/B,CAAyC;AAC9CC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;AACA,SAAKC,MAAL,GAAcN,KAAK,CAACO,SAAN,EAAd;AACA,SAAKC,KAAL,GAAa;AAACC,MAAAA,SAAS,EAAE;AAAZ,KAAb;AACD;;AAEDC,EAAAA,iBAAiB,GAAG;AAElB;AACAT,IAAAA,WAAW,CAAC,CAAC,UAAD,EAAa,oBAAb,EAAmC,qBAAnC,EAA0D,iBAA1D,EAA6E,oBAA7E,EAAmG,cAAnG,EACZ,4BADY,EAEZ,sCAFY,EAGZ,+BAHY,CAAD,EAGwB;AAAEU,MAAAA,GAAG,EAAE;AAAP,KAHxB,CAAX,CAICC,IAJD,CAIM,CAAC,CAACC,SAAD,EAAYC,OAAZ,EAAqBC,MAArB,EAA6BC,IAA7B,EAAmCC,IAAnC,EAAyCC,OAAzC,EAAkDC,eAAlD,EAAmEC,yBAAnE,EAA8FC,gBAA9F,CAAD,KAAqH;AACzH,YAAMC,GAAG,GAAG,IAAIT,SAAJ,CAAc;AACxBU,QAAAA,OAAO,EAAE;AADe,OAAd,CAAZ;AAIA,UAAIC,IAAI,GAAG,IAAIV,OAAJ,CAAY;AACrBW,QAAAA,SAAS,EAAE,KAAKnB,MAAL,CAAYoB,OADF;AAErBJ,QAAAA,GAAG,EAAEA,GAFgB;AAGrBK,QAAAA,MAAM,EAAE,CAAC,CAAC,GAAF,EAAO,EAAP,CAHa;AAIrBC,QAAAA,IAAI,EAAE;AAJe,OAAZ,CAAX,CALyH,CAYzH;;AACA,UAAIC,MAAM,GAAG,IAAId,MAAJ,CAAW;AACtBS,QAAAA,IAAI,EAAEA;AADgB,OAAX,CAAb;AAGAA,MAAAA,IAAI,CAACM,EAAL,CAAQC,GAAR,CAAYF,MAAZ,EAAoB,WAApB;AAEA,UAAIG,IAAI,GAAG,IAAIf,IAAJ,CAASK,GAAT,CAAX;AACAU,MAAAA,IAAI,CAACC,EAAL,CAAQ,UAAR,EAAoBjB,IAAI,CAACkB,KAAL,CAAWZ,GAAX,EAAgBa,gBAAhB,CAApB;AACAH,MAAAA,IAAI,CAACI,QAAL,CAAcnB,IAAI,CAACoB,gBAAnB;;AAEA,eAASC,mBAAT,CAA6BC,MAA7B,EAAqC;AACnC,YAAIC,MAAM,GAAGD,MAAM,CAACC,MAApB;AACAC,QAAAA,OAAO,CAACC,GAAR,CAAYC,IAAI,CAACC,SAAL,CAAeJ,MAAf,CAAZ;AACAK,QAAAA,GAAG,CAACC,IAAJ,CAAS,MAAT,EAAiBC,SAAjB,GAA6BP,MAAM,CAACQ,KAAP,CAAa,CAAb,EAAgBC,OAAhB,CAAwB,CAAxB,IAA6B,QAA1D;AACAJ,QAAAA,GAAG,CAACC,IAAJ,CAAS,QAAT,EAAmBC,SAAnB,GAA+BP,MAAM,CAACU,OAAP,CAAe,CAAf,EAAkBD,OAAlB,CAA0B,CAA1B,IAA+B,OAA9D;AACD;;AAED,eAASd,gBAAT,CAA0BI,MAA1B,EAAkC;AAChC,YAAIY,QAAQ,GAAGZ,MAAM,CAACY,QAAtB;AACA7B,QAAAA,GAAG,CAAC8B,QAAJ,CAAaC,KAAb;AAEA,YAAIC,OAAO,GAAGhC,GAAG,CAAC8B,QAAJ,CAAarB,GAAb,CAAiB,IAAIb,OAAJ,CAAYiC,QAAZ,EAAsB,IAAI9B,gBAAJ,EAAtB,CAAjB,CAAd,CAJgC,CAMhC;;AACA,YAAIkC,eAAe,GAAG,IAAIpC,eAAJ,CAAoB,+FAApB,CAAtB;AACAoC,QAAAA,eAAe,CAACtB,EAAhB,CAAmB,4BAAnB,EAAiDK,mBAAjD;AACA,cAAMkB,oBAAoB,GAAG,IAAIpC,yBAAJ,EAA7B;AACAoC,QAAAA,oBAAoB,CAACC,UAArB,GAAkCtC,eAAe,CAACuC,SAAlD;AACAF,QAAAA,oBAAoB,CAACG,QAArB,GAAgCxC,eAAe,CAACyC,UAAhD;AACAJ,QAAAA,oBAAoB,CAACK,eAArB,GAAuC,UAAvC;AACAN,QAAAA,eAAe,CAACO,QAAhB,CAAyB,CAACX,QAAD,CAAzB,EAAqC,UAASY,oBAAT,EAA+B;AAClEP,UAAAA,oBAAoB,CAACQ,QAArB,GAAgCD,oBAAhC;AACAR,UAAAA,eAAe,CAACU,eAAhB,CAAgCT,oBAAhC;AACD,SAHD;AAID;AAEF,KApDD;AAqDD;;AAGDU,EAAAA,oBAAoB,GAAG;AACrB,QAAI,KAAK1C,IAAT,EAAe;AACb;AACA,WAAKA,IAAL,CAAUC,SAAV,GAAsB,IAAtB;AACD;AACF;;AAED0C,EAAAA,MAAM,GAAG;AACP,WACE;AAAK,MAAA,SAAS,EAAC,QAAf;AAAwB,MAAA,GAAG,EAAE,KAAK7D,MAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF;AAGD;;AA7E6C","sourcesContent":["// Adapted from \"Using the ArcGIS API for JavaScript with React\"\n// found here: https://developers.arcgis.com/javascript/latest/guide/react/\n\nimport React from 'react';\nimport { loadModules } from 'esri-loader';\n// import geometryService from '../scripts/geometryService'\n\nexport class WebMapView extends React.Component {\n  constructor(props) {\n    super(props);\n    this.mapRef = React.createRef();\n    this.state = {stylePath: 'https://js.arcgis.com/3.31/esri/css/esri.css'};\n  }\n\n  componentDidMount() {\n\n    // lazy load the required ArcGIS API for JavaScript modules and CSS\n    loadModules(['esri/Map', 'esri/views/MapView', 'esri/widgets/Search', 'dojo/_base/lang', 'esri/toolbars/draw', \"esri/graphic\",\n    \"esri/tasks/GeometryService\",\n    \"esri/tasks/AreasAndLengthsParameters\",\n    \"esri/symbols/SimpleFillSymbol\" ], { css: true })\n    .then(([ArcGISMap, MapView, Search, lang, Draw, Graphic, GeometryService, AreasAndLengthsParameters, SimpleFillSymbol]) => {\n      const map = new ArcGISMap({\n        basemap: 'topo-vector'\n      });\n\n      let view = new MapView({\n        container: this.mapRef.current,\n        map: map,\n        center: [-118, 34],\n        zoom: 8\n      });\n      \n      // add searchbar \n      let search = new Search({\n        view: view\n      });\n      view.ui.add(search, \"top-right\");\n\n      let draw = new Draw(map);\n      draw.on(\"draw-end\", lang.hitch(map, getAreaAndLength));\n      draw.activate(Draw.FREEHAND_POLYGON);\n\n      function outputAreaAndLength(evtObj) {\n        let result = evtObj.result;\n        console.log(json.stringify(result));\n        dom.byId(\"area\").innerHTML = result.areas[0].toFixed(3) + \" acres\";\n        dom.byId(\"length\").innerHTML = result.lengths[0].toFixed(3) + \" feet\";\n      }\n      \n      function getAreaAndLength(evtObj) {\n        let geometry = evtObj.geometry;\n        map.graphics.clear();\n        \n        let graphic = map.graphics.add(new Graphic(geometry, new SimpleFillSymbol()));\n        \n        //setup the parameters for the areas and lengths operation\n        let geometryService = new GeometryService(\"https://sampleserver6.arcgisonline.com/arcgis/rest/services/Utilities/Geometry/GeometryServer\");\n        geometryService.on(\"areas-and-lengths-complete\", outputAreaAndLength);\n        const areasAndLengthParams = new AreasAndLengthsParameters();\n        areasAndLengthParams.lengthUnit = GeometryService.UNIT_FOOT;\n        areasAndLengthParams.areaUnit = GeometryService.UNIT_ACRES;\n        areasAndLengthParams.calculationType = \"geodesic\";\n        geometryService.simplify([geometry], function(simplifiedGeometries) {\n          areasAndLengthParams.polygons = simplifiedGeometries;\n          geometryService.areasAndLengths(areasAndLengthParams);\n        });\n      }\n      \n    });\n  }\n\n\n  componentWillUnmount() {\n    if (this.view) {\n      // destroy the map view\n      this.view.container = null;\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"webmap\" ref={this.mapRef} />\n    )\n  }\n}"]},"metadata":{},"sourceType":"module"}