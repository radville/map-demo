// COPYRIGHT Â© 2019 Esri
//
// All rights reserved under the copyright laws of the United States
// and applicable international laws, treaties, and conventions.
//
// This material is licensed for use under the Esri Master License
// Agreement (MLA), and is bound by the terms of that agreement.
// You may redistribute and use this code without modification,
// provided you adhere to the terms of the MLA and include this
// copyright notice.
//
// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english
//
// For additional information, contact:
// Environmental Systems Research Institute, Inc.
// Attn: Contracts and Legal Services Department
// 380 New York Street
// Redlands, California, USA 92373
// USA
//
// email: contracts@esri.com
//
// See http://js.arcgis.com/4.14/esri/copyright.txt for details.

define(["require","exports","../ArcadePortal","../Dictionary","../Feature","../languageUtils"],function(n,t,r,e,o,i){function u(n,t){n.portal=function(n,e){return t(n,e,function(n,t,e){return i.pcCheck(e,1,1),new r(i.toString(e[0]))})},n.trim=function(n,r){return t(n,r,function(n,t,r){return i.pcCheck(r,1,1),i.toString(r[0]).trim()})},n.upper=function(n,r){return t(n,r,function(n,t,r){return i.pcCheck(r,1,1),i.toString(r[0]).toUpperCase()})},n.proper=function(n,r){return t(n,r,function(n,t,r){i.pcCheck(r,1,2);var e=1;2===r.length&&"firstword"===i.toString(r[1]).toLowerCase()&&(e=2);for(var o=/\s/,u=i.toString(r[0]),c="",a=!0,f=0;f<u.length;f++){var l=u[f];if(o.test(l))1===e&&(a=!0);else{l.toUpperCase()!==l.toLowerCase()&&(a?(l=l.toUpperCase(),a=!1):l=l.toLowerCase())}c+=l}return c})},n.lower=function(n,r){return t(n,r,function(n,t,r){return i.pcCheck(r,1,1),i.toString(r[0]).toLowerCase()})},n.guid=function(n,r){return t(n,r,function(n,t,r){if(i.pcCheck(r,0,1),r.length>0)switch(i.toString(r[0]).toLowerCase()){case"digits":return i.generateUUID().replace("-","").replace("-","").replace("-","").replace("-","");case"digits-hyphen":return i.generateUUID();case"digits-hyphen-braces":return"{"+i.generateUUID()+"}";case"digits-hyphen-parentheses":return"("+i.generateUUID()+")"}return"{"+i.generateUUID()+"}"})},n.console=function(n,r){return t(n,r,function(t,r,e){return 0===e.length||(1===e.length?n.console(i.toString(e[0])):n.console(i.toString(e))),i.voidOperation})},n.mid=function(n,r){return t(n,r,function(n,t,r){i.pcCheck(r,2,3);var e=i.toNumber(r[1]);if(isNaN(e))return"";if(e<0&&(e=0),2===r.length)return i.toString(r[0]).substr(e);var o=i.toNumber(r[2]);return isNaN(o)?"":(o<0&&(o=0),i.toString(r[0]).substr(e,o))})},n.find=function(n,r){return t(n,r,function(n,t,r){i.pcCheck(r,2,3);var e=0;if(r.length>2){if(e=i.toNumber(i.defaultUndefined(r[2],0)),isNaN(e))return-1;e<0&&(e=0)}return i.toString(r[1]).indexOf(i.toString(r[0]),e)})},n.left=function(n,r){return t(n,r,function(n,t,r){i.pcCheck(r,2,2);var e=i.toNumber(r[1]);return isNaN(e)?"":(e<0&&(e=0),i.toString(r[0]).substr(0,e))})},n.right=function(n,r){return t(n,r,function(n,t,r){i.pcCheck(r,2,2);var e=i.toNumber(r[1]);return isNaN(e)?"":(e<0&&(e=0),i.toString(r[0]).substr(-1*e,e))})},n.split=function(n,r){return t(n,r,function(n,t,r){i.pcCheck(r,2,4);var e,o=i.toNumber(i.defaultUndefined(r[2],-1)),u=i.toBoolean(i.defaultUndefined(r[3],!1));if(-1===o||null===o||!0===u?e=i.toString(r[0]).split(i.toString(r[1])):(isNaN(o)&&(o=-1),o<-1&&(o=-1),e=i.toString(r[0]).split(i.toString(r[1]),o)),!1===u)return e;for(var c=[],a=0;a<e.length&&!(-1!==o&&c.length>=o);a++)""!==e[a]&&void 0!==e[a]&&c.push(e[a]);return c})},n.text=function(n,r){return t(n,r,function(n,t,r){return i.pcCheck(r,1,2),i.toStringExplicit(r[0],r[1])})},n.concatenate=function(n,r){return t(n,r,function(n,t,r){var e=[];if(r.length<1)return"";if(i.isArray(r[0])){for(var o=i.defaultUndefined(r[2],""),u=0;u<r[0].length;u++)e[u]=i.toStringExplicit(r[0][u],o);return r.length>1?e.join(r[1]):e.join("")}if(i.isImmutableArray(r[0])){for(var o=i.defaultUndefined(r[2],""),u=0;u<r[0].length();u++)e[u]=i.toStringExplicit(r[0].get(u),o);return r.length>1?e.join(r[1]):e.join("")}for(var u=0;u<r.length;u++)e[u]=i.toStringExplicit(r[u]);return e.join("")})},n.reverse=function(n,r){return t(n,r,function(n,t,r){if(i.pcCheck(r,1,1),i.isArray(r[0])){var e=r[0].slice(0);return e.reverse(),e}if(i.isImmutableArray(r[0])){var o=r[0].toArray().slice(0);return o.reverse(),o}throw new Error("Invalid Parameter")})},n.replace=function(n,r){return t(n,r,function(n,t,r){i.pcCheck(r,3,4);var e=i.toString(r[0]),o=i.toString(r[1]),u=i.toString(r[2]);return 4!==r.length||i.toBoolean(r[3])?i.multiReplace(e,o,u):e.replace(o,u)})},n.domainname=function(n,r){return t(n,r,function(n,t,r){if(i.pcCheck(r,2,4),r[0]instanceof o)return r[0].domainValueLookup(i.toString(r[1]),r[2],void 0===r[3]?void 0:i.toNumber(r[3]));throw new Error("Invalid Parameter")})},n.domaincode=function(n,r){return t(n,r,function(n,t,r){if(i.pcCheck(r,2,4),r[0]instanceof o)return r[0].domainCodeLookup(i.toString(r[1]),r[2],void 0===r[3]?void 0:i.toNumber(r[3]));throw new Error("Invalid Parameter")})},n.urlencode=function(n,r){return t(n,r,function(n,t,r){if(i.pcCheck(r,1,1),null===r[0])return"";if(r[0]instanceof e){for(var o="",u=0,c=r[0].keys();u<c.length;u++){var a=c[u],f=r[0].field(a);""!==o&&(o+="&"),o+=null===f?encodeURIComponent(a)+"=":encodeURIComponent(a)+"="+encodeURIComponent(f)}return o}return encodeURIComponent(i.toString(r[0]))})}}Object.defineProperty(t,"__esModule",{value:!0}),t.registerFunctions=u});