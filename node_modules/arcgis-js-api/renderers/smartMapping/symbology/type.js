// COPYRIGHT Â© 2019 Esri
//
// All rights reserved under the copyright laws of the United States
// and applicable international laws, treaties, and conventions.
//
// This material is licensed for use under the Esri Master License
// Agreement (MLA), and is bound by the terms of that agreement.
// You may redistribute and use this code without modification,
// provided you adhere to the terms of the MLA and include this
// copyright notice.
//
// See use restrictions at http://www.esri.com/legal/pdfs/mla_e204_e300/english
//
// For additional information, contact:
// Environmental Systems Research Institute, Inc.
// Attn: Contracts and Legal Services Department
// 380 New York Street
// Redlands, California, USA 92373
// USA
//
// email: contracts@esri.com
//
// See http://js.arcgis.com/4.14/esri/copyright.txt for details.

define(["require","exports","../../../core/tsSupport/assignHelper","../../../core/tsSupport/extendsHelper","../../../Color","./support/colors","./support/SymbologyBase","./support/utils"],function(o,a,e,t,n,r,i,c){function l(o,a,e){var t=o.theme||"default",n=r[a];if(n){var i=n.stops,c="mesh"!==o.geometryType&&o.worldScale,l=c?o.view:null;switch(o.geometryType){case"point":case"multipoint":if("point-cloud-class"===t)return s({theme:t,name:n.name,tags:n.tags,colors:i});var d=e;return m({name:n.name,tags:n.tags,theme:t,colors:i,noDataColor:d.noDataColor,opacity:1,outline:d.outline,size:d.size},l);case"polyline":var y=e;return p({name:n.name,tags:n.tags,theme:t,colors:i,noDataColor:y.noDataColor,opacity:1,width:y.width},l);case"polygon":var g=e;return u({name:n.name,tags:n.tags,theme:t,colors:i,noDataColor:g.noDataColor,opacity:g.fillOpacity||1,outline:g.outline,size:f},l);case"mesh":var w=e;return h({name:n.name,tags:n.tags,theme:t,colors:i,noDataColor:w.noDataColor,opacity:w.fillOpacity||1});default:return}}}function s(o){return{name:o.name,tags:o.tags.slice(),theme:o.theme,colors:o.colors.map(function(o){return new n(o)})}}function m(o,a){return{name:o.name,tags:o.tags.slice(),theme:o.theme,colors:o.colors.map(function(o){return new n(o)}),noDataColor:new n(o.noDataColor),outline:{color:new n(o.outline.color),width:o.outline.width},size:a?c.toWorldScale(o.size,a):o.size,opacity:o.opacity}}function p(o,a){return{name:o.name,tags:o.tags.slice(),theme:o.theme,colors:o.colors.map(function(o){return new n(o)}),noDataColor:new n(o.noDataColor),width:a?c.toWorldScale(o.width,a):o.width,opacity:o.opacity}}function u(o,a){return{name:o.name,tags:o.tags.slice(),theme:o.theme,colors:o.colors.map(function(o){return new n(o)}),noDataColor:new n(o.noDataColor),outline:{color:new n(o.outline.color),width:o.outline.width},opacity:o.opacity,size:a?c.toWorldScale(o.size,a):o.size}}function h(o){return{name:o.name,tags:o.tags.slice(),theme:o.theme,colors:o.colors.map(function(o){return new n(o)}),noDataColor:new n(o.noDataColor),opacity:o.opacity}}var d={light:{color:[153,153,153,.25],width:"1px"},dark:{color:[153,153,153,.25],width:"1px"},darker:{color:[26,26,26,.25],width:"1px"}},y=["tropical-bliss","desert-blooms","under-the-sea","vibrant-rainbow","ocean-bay","prairie-summer","pastel-chalk"],g=["predominant-v1","predominant-v2","predominant-v3","predominant-v4","predominant-v5","predominance-race","predominance-money","predominance-race-ethnic","predominance-rainbow","predominance-sequence"],f="12px",w={light:{common:{noDataColor:"#aaaaaa",outline:d.light,size:"8px"},primary:"cat-dark",secondary:["cat-light"].concat(y).concat(g)},dark:{common:{noDataColor:"#aaaaaa",outline:d.darker,size:"8px"},primary:"cat-light",secondary:["cat-dark"].concat(y).concat(g)}},D={light:{common:{noDataColor:"#aaaaaa",width:"2px"},primary:"cat-dark",secondary:["cat-light"].concat(y).concat(g)},dark:{common:{noDataColor:"#aaaaaa",width:"2px"},primary:"cat-light",secondary:["cat-dark"].concat(y).concat(g)}},C={light:{common:{noDataColor:"#aaaaaa",outline:d.light,fillOpacity:.8},primary:"cat-dark",secondary:["cat-light"].concat(y).concat(g)},dark:{common:{noDataColor:"#aaaaaa",outline:d.dark,fillOpacity:.8},primary:"cat-light",secondary:["cat-dark"].concat(y).concat(g)}},b={name:"default",label:"Default",description:"Default theme for visualizing features by their type.",schemes:{point:w,polyline:D,polygon:C}},v={name:"point-cloud-class",label:"Point Cloud Class",description:"Default theme for visualizing point cloud data based on classification.",schemes:{point:{light:{primary:"point-cloud-class-scheme",secondary:[]},dark:{primary:"point-cloud-class-scheme",secondary:[]}}}},S={default:b,"point-cloud-class":v};return new(function(o){function a(){return o.call(this,{themeDictionary:S})||this}return t(a,o),a.prototype.getSchemes=function(o){var a=o.theme||"default",e=this.getRawSchemes({theme:a,basemap:o.basemap,geometryType:o.geometryType,basemapTheme:o.basemapTheme});if(e){var t=e.schemesInfo,n=e.basemapId,r=e.basemapTheme,i=t.common;return{primaryScheme:l(o,t.primary,i),secondarySchemes:t.secondary.map(function(a){return l(o,a,i)}).filter(Boolean),basemapId:n,basemapTheme:r}}},a.prototype.getSchemeByName=function(o){return this.filterSchemesByName(o)},a.prototype.getSchemesByTag=function(o){return this.filterSchemesByTag(o)},a.prototype.cloneScheme=function(o){if(o){var a=e({},o);return a.colors=a.colors.map(function(o){return new n(o)}),"noDataColor"in a&&a.noDataColor&&(a.noDataColor=new n(a.noDataColor)),"outline"in a&&a.outline&&(a.outline={color:a.outline.color&&new n(a.outline.color),width:a.outline.width}),a}},a}(i))});